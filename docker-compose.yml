version: '3.8'

services:
  release:
    build:
      context: .
      target: release-bin

    ports:
      - "25565:25565"
    environment:
      - RUST_LOG=${RUST_LOG:-info}
#    volumes:
#      - type: bind
#        source: ./profiling
#        target: /app/profiling
  debug:
    build:
      context: .
      target: debug-bin
    ports:
      - "25565:25565"
    environment:
      - RUST_LOG=${RUST_LOG:-info}
#    volumes:
#      - type: bind
#        source: ./profiling
#        target: /app/profiling

  cli:
    build:
      context: .
      target: cli
    environment:
      - RUST_LOG=${RUST_LOG:-info}
    volumes:
      - type: bind
        source: ./profiling
        target: /app/profiling

  bench:
    build:
      context: .
      target: bench
    environment:
      - RUST_LOG=${RUST_LOG:-info}
#    volumes:
#      - type: bind
#        source: ./profiling
#        target: /app/profiling
